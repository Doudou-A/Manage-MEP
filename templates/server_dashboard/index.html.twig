{% extends 'base.html.twig' %}

{% block title %}Dashboard
{% endblock %}

{% block body %}
	<select class="target">
		<option value="option1" selected="selected">Option 1</option>
		<option value="option2">Option 2</option>
	</select>
	<a id="div_0_add" href="javascript:visibiliteAdd('div_0');">
		<p>Nouveau</p>
	</a>
	<a id="div_0_folder_add" href="javascript:visibiliteFolder('div_0_folder');" style="display:none;">
		<p>Ajouter un Dossier</p>
	</a>
	<div id="div_0_folder_form" style="display:none;">
		{{ form_start(form, {'action' : path('add_folder', { 'server': server })}) }}
		{{ form_row(form.name, {'label':false})}}
		{{ form_end(form) }}
	</div>
	{% for folder in folders %}
		<div class="col-12 d-flex p-0">
			<a id="{{folder.jsId}}" class="btn js-close {{folder.jsId}}_close p-1">
				<div>+</div>
			</a>
			<a id="{{folder.jsId}}" class="btn js-open {{folder.jsId}}_open d-none p-1">
				<div>-</div>
			</a>
			<img src="picture/folder_win10.png" alt="Folder" width="20px" height="30px"/>
			<div>{{folder.name}}</div>
		</div>
		<div id="{{folder.jsId}}_request" class="ml-3 border-left"></div>
	{% endfor %}
{% endblock %}

{% block javascripts %}
<script>
$(function () {
	 $(".form_submit").submit(function(e) {

    e.preventDefault(); // avoid to execute the actual submit of the form.

    var form = $(this);
    var url = form.attr('action');
		alert("ok");
    
    $.ajax({
           type: "POST",
           url: "http://localhost:8000/dev/add/sub_folder/folder",
           data: form.serialize(), // serializes the form's elements.
           success: function(data)
           {
               alert(data); // show response from the php script.
           }
         });

    
});
});
</script>

{% endblock %}